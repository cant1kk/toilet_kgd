{"ast":null,"code":"import _objectSpread from\"d:/map for cur/toilet-finder-kaliningrad/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{MapContainer,TileLayer,Marker,Popup}from'react-leaflet';import{Modal,Button,Form,Alert,Card,Badge,Spinner}from'react-bootstrap';import{toiletAPI}from'../services/api';import L from'leaflet';import{validateAddress,geocodeAddress,formatAddress}from'../services/geocoding';// Fix for default marker icons\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',iconUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'});// Custom icons for different toilet types\nconst createCustomIcon=type=>{const iconConfig={free:{color:'#28a745'},paid:{color:'#dc3545'},purchase_required:{color:'#ffc107'}};const config=iconConfig[type];return L.divIcon({html:\"<div style=\\\"background-color: \".concat(config.color,\"; width: 20px; height: 20px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\\\"></div>\"),className:'custom-toilet-marker',iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-10]});};// Kaliningrad center coordinates\nconst KALININGRAD_CENTER=[54.710,20.511];const MapPage=()=>{const[toilets,setToilets]=useState([]);const[showAddModal,setShowAddModal]=useState(false);const[userLocation,setUserLocation]=useState(null);const[locationLoading,setLocationLoading]=useState(false);const[newToilet,setNewToilet]=useState({name:'',address:'',latitude:0,longitude:0,type:'free',price:'',description:''});const[loading,setLoading]=useState(false);const[geocodingLoading,setGeocodingLoading]=useState(false);const[alert,setAlert]=useState({show:false,message:'',variant:'success'});const[addressError,setAddressError]=useState('');useEffect(()=>{loadToilets();getUserLocation();},[]);const getUserLocation=()=>{if('geolocation'in navigator){setLocationLoading(true);navigator.geolocation.getCurrentPosition(position=>{const{latitude,longitude}=position.coords;setUserLocation([latitude,longitude]);setLocationLoading(false);},error=>{console.error('Error getting location:',error);setLocationLoading(false);});}};const loadToilets=async()=>{try{const data=await toiletAPI.getAll();setToilets(data);}catch(error){console.error('Error loading toilets:',error);setAlert({show:true,message:'–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö',variant:'danger'});}};const handleAddressChange=async address=>{setNewToilet(prev=>_objectSpread(_objectSpread({},prev),{},{address}));// –í–∞–ª–∏–¥–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞\nif(address&&!validateAddress(address)){setAddressError('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å (—É–ª–∏—Ü–∞ –∏ –Ω–æ–º–µ—Ä –¥–æ–º–∞)');return;}setAddressError('');// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø—Ä–∏ –≤–≤–æ–¥–µ –∞–¥—Ä–µ—Å–∞\nif(address&&validateAddress(address)){setGeocodingLoading(true);try{const result=await geocodeAddress(address);if(result){const lat=parseFloat(result.lat);const lng=parseFloat(result.lon);// –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∫–æ–æ—Ä–∞—Ç—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–∞\nif(lat>=54.6&&lat<=54.8&&lng>=20.3&&lng<=20.6){setNewToilet(prev=>_objectSpread(_objectSpread({},prev),{},{latitude:lat,longitude:lng,address:formatAddress(address)}));setAddressError('');}else{setAddressError('–ê–¥—Ä–µ—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–∞');}}else{setAddressError('–ê–¥—Ä–µ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö');}}catch(error){setAddressError('–û—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑');}finally{setGeocodingLoading(false);}}};const handleSubmit=async e=>{e.preventDefault();// –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è\nif(!newToilet.name||!newToilet.address){setAlert({show:true,message:'–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è',variant:'danger'});return;}if(!validateAddress(newToilet.address)){setAlert({show:true,message:'–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å (—É–ª–∏—Ü–∞ –∏ –Ω–æ–º–µ—Ä –¥–æ–º–∞)',variant:'danger'});return;}if(!newToilet.latitude||!newToilet.longitude){setAlert({show:true,message:'–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥—Ä–µ—Å',variant:'danger'});return;}setLoading(true);try{await toiletAPI.submit(newToilet);setAlert({show:true,message:'–¢—É–∞–ª–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é',variant:'success'});setShowAddModal(false);resetForm();}catch(error){var _error$response,_error$response$data;setAlert({show:true,message:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏',variant:'danger'});}finally{setLoading(false);}};const resetForm=()=>{setNewToilet({name:'',address:'',latitude:0,longitude:0,type:'free',price:'',description:''});setAddressError('');};const getTypeLabel=type=>{const labels={free:'–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π',paid:'–ü–ª–∞—Ç–Ω—ã–π',purchase_required:'–¢–æ–ª—å–∫–æ –∑–∞ –ø–æ–∫—É–ø–∫—É'};return labels[type];};const getTypeBadgeVariant=type=>{const variants={free:'success',paid:'warning',purchase_required:'danger'};return variants[type];};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-0\",children:[alert.show&&/*#__PURE__*/_jsx(Alert,{variant:alert.variant,onClose:()=>setAlert(prev=>_objectSpread(_objectSpread({},prev),{},{show:false})),dismissible:true,className:\"m-3\",children:alert.message}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center p-3 bg-light\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-0\",children:\"\\u041A\\u0430\\u0440\\u0442\\u0430 \\u0442\\u043E\\u0447\\u0435\\u043A\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",onClick:getUserLocation,disabled:locationLoading,className:\"me-2\",children:locationLoading?'üìç...':'üìç –ú–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ'}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:()=>setShowAddModal(true),children:\"+ \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u043E\\u0447\\u043A\\u0443\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-white border-bottom\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"mb-2\",children:\"\\u041B\\u0435\\u0433\\u0435\\u043D\\u0434\\u0430:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-4 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'16px',height:'16px',borderRadius:'50%',backgroundColor:'#28a745',border:'2px solid white',boxShadow:'0 1px 2px rgba(0,0,0,0.3)'}}),/*#__PURE__*/_jsx(\"span\",{className:\"small\",children:\"\\u0411\\u0435\\u0441\\u043F\\u043B\\u0430\\u0442\\u043D\\u044B\\u0439\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'16px',height:'16px',borderRadius:'50%',backgroundColor:'#dc3545',border:'2px solid white',boxShadow:'0 1px 2px rgba(0,0,0,0.3)'}}),/*#__PURE__*/_jsx(\"span\",{className:\"small\",children:\"\\u041F\\u043B\\u0430\\u0442\\u043D\\u044B\\u0439\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'16px',height:'16px',borderRadius:'50%',backgroundColor:'#ffc107',border:'2px solid white',boxShadow:'0 1px 2px rgba(0,0,0,0.3)'}}),/*#__PURE__*/_jsx(\"span\",{className:\"small\",children:\"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u0437\\u0430 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0443\"})]}),userLocation&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'16px',height:'16px',borderRadius:'50%',backgroundColor:'#007bff',border:'2px solid white',boxShadow:'0 1px 2px rgba(0,0,0,0.3)'}}),/*#__PURE__*/_jsx(\"span\",{className:\"small\",children:\"\\u0412\\u0430\\u0448\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E\\u043F\\u043E\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:'calc(100vh - 200px)'},children:/*#__PURE__*/_jsxs(MapContainer,{center:KALININGRAD_CENTER,zoom:12,style:{height:'100%',width:'100%'},children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),userLocation&&/*#__PURE__*/_jsx(Marker,{position:userLocation,icon:L.divIcon({html:'<div style=\"background-color: #007bff; width: 20px; height: 20px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\"></div>',className:'user-location-marker',iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-10]}),children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0412\\u0430\\u0448\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E\\u043F\\u043E\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"})})})}),toilets.map(toilet=>/*#__PURE__*/_jsx(Marker,{position:[toilet.latitude,toilet.longitude],icon:createCustomIcon(toilet.type),children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsx(Card,{className:\"border-0\",style:{width:'250px'},children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{className:\"h6\",children:toilet.name}),/*#__PURE__*/_jsxs(Card.Text,{className:\"small text-muted mb-2\",children:[\"\\uD83D\\uDCCD \",toilet.address]}),/*#__PURE__*/_jsx(Badge,{bg:getTypeBadgeVariant(toilet.type),className:\"mb-2\",children:getTypeLabel(toilet.type)}),toilet.price&&/*#__PURE__*/_jsxs(\"div\",{className:\"small mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0421\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C:\"}),\" \",toilet.price]}),toilet.description&&/*#__PURE__*/_jsx(\"div\",{className:\"small text-muted\",children:toilet.description})]})})})},toilet.id))]})}),/*#__PURE__*/_jsxs(Modal,{show:showAddModal,onHide:()=>setShowAddModal(false),size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u0443\\u044E \\u0442\\u043E\\u0447\\u043A\\u0443\"})}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(Alert,{variant:\"info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0418\\u043D\\u0441\\u0442\\u0440\\u0443\\u043A\\u0446\\u0438\\u044F:\"}),\" \\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0430\\u0434\\u0440\\u0435\\u0441 \\u0432 \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442\\u0435 \\\"\\u0443\\u043B. \\u041B\\u0435\\u043D\\u0438\\u043D\\u0441\\u043A\\u0438\\u0439 \\u043F\\u0440\\u043E\\u0441\\u043F\\u0435\\u043A\\u0442 30\\\" \\u0438\\u043B\\u0438 \\\"\\u041A\\u0438\\u0440\\u043E\\u0432\\u0430 15\\\". \\u041A\\u043Eordin\\u0430\\u0442\\u044B \\u043E\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u044F\\u0442\\u0441\\u044F \\u0430\\u0432\\u0442\\u043E\\u043C\\u0430\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438.\"]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 *\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",required:true,value:newToilet.name,onChange:e=>setNewToilet(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value})),placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440: \\u0422\\u0443\\u0430\\u043B\\u0435\\u0442 \\u0432 \\u0422\\u0426\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0410\\u0434\\u0440\\u0435\\u0441 *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"text\",required:true,value:newToilet.address,onChange:e=>handleAddressChange(e.target.value),placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440: \\u0443\\u043B. \\u041B\\u0435\\u043D\\u0438\\u043D\\u0441\\u043A\\u0438\\u0439 \\u043F\\u0440\\u043E\\u0441\\u043F\\u0435\\u043A\\u0442 30\",isInvalid:!!addressError,disabled:geocodingLoading}),geocodingLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute\",style:{right:'10px',top:'8px'},children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\"})}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:addressError}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0443\\u043B\\u0438\\u0446\\u0443 \\u0438 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0434\\u043E\\u043C\\u0430. \\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440: \\\"\\u041A\\u0438\\u0440\\u043E\\u0432\\u0430 15\\\" \\u0438\\u043B\\u0438 \\\"\\u0443\\u043B. \\u041B\\u0435\\u043D\\u0438\\u043D\\u0430 30\\\"\"})]})]}),newToilet.latitude&&newToilet.longitude&&/*#__PURE__*/_jsxs(Alert,{variant:\"success\",className:\"small\",children:[\"\\u2705 \\u041A\\u043E\\u043E\\u0440\\u0434\\u0438\\u043D\\u0430\\u0442\\u044B \\u043E\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u0435\\u043D\\u044B: \",newToilet.latitude.toFixed(6),\", \",newToilet.longitude.toFixed(6)]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0422\\u0438\\u043F *\"}),/*#__PURE__*/_jsxs(Form.Select,{required:true,value:newToilet.type,onChange:e=>setNewToilet(prev=>_objectSpread(_objectSpread({},prev),{},{type:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"free\",children:\"\\uD83C\\uDD93 \\u0411\\u0435\\u0441\\u043F\\u043B\\u0430\\u0442\\u043D\\u044B\\u0439\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paid\",children:\"\\uD83D\\uDCB0 \\u041F\\u043B\\u0430\\u0442\\u043D\\u044B\\u0439\"}),/*#__PURE__*/_jsx(\"option\",{value:\"purchase_required\",children:\"\\uD83D\\uDED2 \\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u0437\\u0430 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0443\"})]})]}),(newToilet.type==='paid'||newToilet.type==='purchase_required')&&/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0421\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C / \\u0423\\u0441\\u043B\\u043E\\u0432\\u0438\\u044F\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:newToilet.price,onChange:e=>setNewToilet(prev=>_objectSpread(_objectSpread({},prev),{},{price:e.target.value})),placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440: 50 \\u0440\\u0443\\u0431\\u043B\\u0435\\u0439 / \\u041F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0430 \\u043E\\u0442 100 \\u0440\\u0443\\u0431\\u043B\\u0435\\u0439\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,value:newToilet.description,onChange:e=>setNewToilet(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),placeholder:\"\\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F (\\u0447\\u0430\\u0441\\u044B \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B, \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u043E\\u0441\\u0442\\u044C \\u0438 \\u0442.\\u0434.)\"})]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowAddModal(false),children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:loading||geocodingLoading||!newToilet.latitude||!!addressError,children:loading?'–û—Ç–ø—Ä–∞–≤–∫–∞...':'–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é'})]})]})]})]});};export default MapPage;","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","Popup","Modal","Button","Form","Alert","Card","Badge","Spinner","toiletAPI","L","validateAddress","geocodeAddress","formatAddress","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","createCustomIcon","type","iconConfig","free","color","paid","purchase_required","config","divIcon","html","concat","className","iconSize","iconAnchor","popupAnchor","KALININGRAD_CENTER","MapPage","toilets","setToilets","showAddModal","setShowAddModal","userLocation","setUserLocation","locationLoading","setLocationLoading","newToilet","setNewToilet","name","address","latitude","longitude","price","description","loading","setLoading","geocodingLoading","setGeocodingLoading","alert","setAlert","show","message","variant","addressError","setAddressError","loadToilets","getUserLocation","navigator","geolocation","getCurrentPosition","position","coords","error","console","data","getAll","handleAddressChange","prev","_objectSpread","result","lat","parseFloat","lng","lon","handleSubmit","e","preventDefault","submit","resetForm","_error$response","_error$response$data","response","getTypeLabel","labels","getTypeBadgeVariant","variants","children","onClose","dismissible","onClick","disabled","style","width","height","borderRadius","backgroundColor","border","boxShadow","center","zoom","attribution","url","icon","map","toilet","Body","Title","Text","bg","id","onHide","size","Header","closeButton","onSubmit","Group","Label","Control","required","value","onChange","target","placeholder","isInvalid","right","top","animation","Feedback","toFixed","Select","as","rows","Footer"],"sources":["d:/map for cur/toilet-finder-kaliningrad/frontend/src/components/MapPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport { Modal, Button, Form, Alert, Card, Badge, Spinner } from 'react-bootstrap';\nimport { Toilet, ToiletFormData } from '../types';\nimport { toiletAPI } from '../services/api';\nimport L from 'leaflet';\nimport { validateAddress, geocodeAddress, formatAddress } from '../services/geocoding';\n\n// Fix for default marker icons\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\n// Custom icons for different toilet types\nconst createCustomIcon = (type: Toilet['type']) => {\n  const iconConfig = {\n    free: { color: '#28a745' },\n    paid: { color: '#dc3545' },\n    purchase_required: { color: '#ffc107' }\n  };\n\n  const config = iconConfig[type];\n  \n  return L.divIcon({\n    html: `<div style=\"background-color: ${config.color}; width: 20px; height: 20px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\"></div>`,\n    className: 'custom-toilet-marker',\n    iconSize: [20, 20],\n    iconAnchor: [10, 10],\n    popupAnchor: [0, -10]\n  });\n};\n\n// Kaliningrad center coordinates\nconst KALININGRAD_CENTER = [54.710, 20.511] as [number, number];\n\nconst MapPage: React.FC = () => {\n  const [toilets, setToilets] = useState<Toilet[]>([]);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [userLocation, setUserLocation] = useState<[number, number] | null>(null);\n  const [locationLoading, setLocationLoading] = useState(false);\n  const [newToilet, setNewToilet] = useState<ToiletFormData>({\n    name: '',\n    address: '',\n    latitude: 0,\n    longitude: 0,\n    type: 'free',\n    price: '',\n    description: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [geocodingLoading, setGeocodingLoading] = useState(false);\n  const [alert, setAlert] = useState<{ show: boolean; message: string; variant: string }>({\n    show: false,\n    message: '',\n    variant: 'success'\n  });\n  const [addressError, setAddressError] = useState('');\n\n  useEffect(() => {\n    loadToilets();\n    getUserLocation();\n  }, []);\n\n  const getUserLocation = () => {\n    if ('geolocation' in navigator) {\n      setLocationLoading(true);\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          setUserLocation([latitude, longitude]);\n          setLocationLoading(false);\n        },\n        (error) => {\n          console.error('Error getting location:', error);\n          setLocationLoading(false);\n        }\n      );\n    }\n  };\n\n  const loadToilets = async () => {\n    try {\n      const data = await toiletAPI.getAll();\n      setToilets(data);\n    } catch (error) {\n      console.error('Error loading toilets:', error);\n      setAlert({\n        show: true,\n        message: '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö',\n        variant: 'danger'\n      });\n    }\n  };\n\n  const handleAddressChange = async (address: string) => {\n    setNewToilet(prev => ({ ...prev, address }));\n    \n    // –í–∞–ª–∏–¥–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞\n    if (address && !validateAddress(address)) {\n      setAddressError('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å (—É–ª–∏—Ü–∞ –∏ –Ω–æ–º–µ—Ä –¥–æ–º–∞)');\n      return;\n    }\n    \n    setAddressError('');\n    \n    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø—Ä–∏ –≤–≤–æ–¥–µ –∞–¥—Ä–µ—Å–∞\n    if (address && validateAddress(address)) {\n      setGeocodingLoading(true);\n      try {\n        const result = await geocodeAddress(address);\n        if (result) {\n          const lat = parseFloat(result.lat);\n          const lng = parseFloat(result.lon);\n          \n          // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∫–æ–æ—Ä–∞—Ç—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–∞\n          if (lat >= 54.6 && lat <= 54.8 && lng >= 20.3 && lng <= 20.6) {\n            setNewToilet(prev => ({\n              ...prev,\n              latitude: lat,\n              longitude: lng,\n              address: formatAddress(address)\n            }));\n            setAddressError('');\n          } else {\n            setAddressError('–ê–¥—Ä–µ—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–∞');\n          }\n        } else {\n          setAddressError('–ê–¥—Ä–µ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö');\n        }\n      } catch (error) {\n        setAddressError('–û—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑');\n      } finally {\n        setGeocodingLoading(false);\n      }\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è\n    if (!newToilet.name || !newToilet.address) {\n      setAlert({\n        show: true,\n        message: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è',\n        variant: 'danger'\n      });\n      return;\n    }\n\n    if (!validateAddress(newToilet.address)) {\n      setAlert({\n        show: true,\n        message: '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å (—É–ª–∏—Ü–∞ –∏ –Ω–æ–º–µ—Ä –¥–æ–º–∞)',\n        variant: 'danger'\n      });\n      return;\n    }\n\n    if (!newToilet.latitude || !newToilet.longitude) {\n      setAlert({\n        show: true,\n        message: '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥—Ä–µ—Å',\n        variant: 'danger'\n      });\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      await toiletAPI.submit(newToilet);\n      setAlert({\n        show: true,\n        message: '–¢—É–∞–ª–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é',\n        variant: 'success'\n      });\n      setShowAddModal(false);\n      resetForm();\n    } catch (error: any) {\n      setAlert({\n        show: true,\n        message: error.response?.data?.error || '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏',\n        variant: 'danger'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const resetForm = () => {\n    setNewToilet({\n      name: '',\n      address: '',\n      latitude: 0,\n      longitude: 0,\n      type: 'free',\n      price: '',\n      description: ''\n    });\n    setAddressError('');\n  };\n\n  const getTypeLabel = (type: Toilet['type']) => {\n    const labels = {\n      free: '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π',\n      paid: '–ü–ª–∞—Ç–Ω—ã–π',\n      purchase_required: '–¢–æ–ª—å–∫–æ –∑–∞ –ø–æ–∫—É–ø–∫—É'\n    };\n    return labels[type];\n  };\n\n  const getTypeBadgeVariant = (type: Toilet['type']) => {\n    const variants = {\n      free: 'success',\n      paid: 'warning',\n      purchase_required: 'danger'\n    };\n    return variants[type];\n  };\n\n  return (\n    <div className=\"container-fluid p-0\">\n      {alert.show && (\n        <Alert \n          variant={alert.variant} \n          onClose={() => setAlert(prev => ({ ...prev, show: false }))}\n          dismissible\n          className=\"m-3\"\n        >\n          {alert.message}\n        </Alert>\n      )}\n\n      <div className=\"d-flex justify-content-between align-items-center p-3 bg-light\">\n        <h1 className=\"h3 mb-0\">–ö–∞—Ä—Ç–∞ —Ç–æ—á–µ–∫</h1>\n        <div>\n          <Button \n            variant=\"outline-secondary\" \n            onClick={getUserLocation}\n            disabled={locationLoading}\n            className=\"me-2\"\n          >\n            {locationLoading ? 'üìç...' : 'üìç –ú–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ'}\n          </Button>\n          <Button \n            variant=\"primary\" \n            onClick={() => setShowAddModal(true)}\n          >\n            + –î–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É\n          </Button>\n        </div>\n      </div>\n\n      {/* –õ–µ–≥–µ–Ω–¥–∞ */}\n      <div className=\"p-3 bg-white border-bottom\">\n        <h6 className=\"mb-2\">–õ–µ–≥–µ–Ω–¥–∞:</h6>\n        <div className=\"d-flex gap-4 flex-wrap\">\n          <div className=\"d-flex align-items-center gap-2\">\n            <div style={{\n              width: '16px', \n              height: '16px', \n              borderRadius: '50%', \n              backgroundColor: '#28a745', \n              border: '2px solid white', \n              boxShadow: '0 1px 2px rgba(0,0,0,0.3)'\n            }}></div>\n            <span className=\"small\">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π</span>\n          </div>\n          <div className=\"d-flex align-items-center gap-2\">\n            <div style={{\n              width: '16px', \n              height: '16px', \n              borderRadius: '50%', \n              backgroundColor: '#dc3545', \n              border: '2px solid white', \n              boxShadow: '0 1px 2px rgba(0,0,0,0.3)'\n            }}></div>\n            <span className=\"small\">–ü–ª–∞—Ç–Ω—ã–π</span>\n          </div>\n          <div className=\"d-flex align-items-center gap-2\">\n            <div style={{\n              width: '16px', \n              height: '16px', \n              borderRadius: '50%', \n              backgroundColor: '#ffc107', \n              border: '2px solid white', \n              boxShadow: '0 1px 2px rgba(0,0,0,0.3)'\n            }}></div>\n            <span className=\"small\">–¢–æ–ª—å–∫–æ –∑–∞ –ø–æ–∫—É–ø–∫—É</span>\n          </div>\n          {userLocation && (\n            <div className=\"d-flex align-items-center gap-2\">\n              <div style={{\n                width: '16px', \n                height: '16px', \n                borderRadius: '50%', \n                backgroundColor: '#007bff', \n                border: '2px solid white', \n                boxShadow: '0 1px 2px rgba(0,0,0,0.3)'\n              }}></div>\n              <span className=\"small\">–í–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div style={{ height: 'calc(100vh - 200px)' }}>\n        <MapContainer \n          center={KALININGRAD_CENTER} \n          zoom={12} \n          style={{ height: '100%', width: '100%' }}\n        >\n          <TileLayer\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n          \n          {userLocation && (\n            <Marker \n              position={userLocation}\n              icon={L.divIcon({\n                html: '<div style=\"background-color: #007bff; width: 20px; height: 20px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\"></div>',\n                className: 'user-location-marker',\n                iconSize: [20, 20],\n                iconAnchor: [10, 10],\n                popupAnchor: [0, -10]\n              })}\n            >\n              <Popup>\n                <div className=\"text-center\">\n                  <strong>–í–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</strong>\n                </div>\n              </Popup>\n            </Marker>\n          )}\n          \n          {toilets.map((toilet) => (\n            <Marker \n              key={toilet.id} \n              position={[toilet.latitude, toilet.longitude]}\n              icon={createCustomIcon(toilet.type)}\n            >\n              <Popup>\n                <Card className=\"border-0\" style={{ width: '250px' }}>\n                  <Card.Body>\n                    <Card.Title className=\"h6\">{toilet.name}</Card.Title>\n                    <Card.Text className=\"small text-muted mb-2\">\n                      üìç {toilet.address}\n                    </Card.Text>\n                    <Badge bg={getTypeBadgeVariant(toilet.type)} className=\"mb-2\">\n                      {getTypeLabel(toilet.type)}\n                    </Badge>\n                    {toilet.price && (\n                      <div className=\"small mb-2\">\n                        <strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong> {toilet.price}\n                      </div>\n                    )}\n                    {toilet.description && (\n                      <div className=\"small text-muted\">\n                        {toilet.description}\n                      </div>\n                    )}\n                  </Card.Body>\n                </Card>\n              </Popup>\n            </Marker>\n          ))}\n        </MapContainer>\n      </div>\n\n      <Modal show={showAddModal} onHide={() => setShowAddModal(false)} size=\"lg\">\n        <Modal.Header closeButton>\n          <Modal.Title>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ç–æ—á–∫—É</Modal.Title>\n        </Modal.Header>\n        <Form onSubmit={handleSubmit}>\n          <Modal.Body>\n            <Alert variant=\"info\">\n              <strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong> –í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –≤ —Ñ–æ—Ä–º–∞—Ç–µ \"—É–ª. –õ–µ–Ω–∏–Ω—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç 30\" –∏–ª–∏ \"–ö–∏—Ä–æ–≤–∞ 15\". \n              –ö–æordin–∞—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.\n            </Alert>\n            \n            <Form.Group className=\"mb-3\">\n              <Form.Label>–ù–∞–∑–≤–∞–Ω–∏–µ *</Form.Label>\n              <Form.Control\n                type=\"text\"\n                required\n                value={newToilet.name}\n                onChange={(e) => setNewToilet(prev => ({ ...prev, name: e.target.value }))}\n                placeholder=\"–ù–∞–ø—Ä–∏–º–µ—Ä: –¢—É–∞–ª–µ—Ç –≤ –¢–¶\"\n              />\n            </Form.Group>\n\n            <Form.Group className=\"mb-3\">\n              <Form.Label>–ê–¥—Ä–µ—Å *</Form.Label>\n              <div className=\"position-relative\">\n                <Form.Control\n                  type=\"text\"\n                  required\n                  value={newToilet.address}\n                  onChange={(e) => handleAddressChange(e.target.value)}\n                  placeholder=\"–ù–∞–ø—Ä–∏–º–µ—Ä: —É–ª. –õ–µ–Ω–∏–Ω—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç 30\"\n                  isInvalid={!!addressError}\n                  disabled={geocodingLoading}\n                />\n                {geocodingLoading && (\n                  <div className=\"position-absolute\" style={{ right: '10px', top: '8px' }}>\n                    <Spinner animation=\"border\" size=\"sm\" />\n                  </div>\n                )}\n                <Form.Control.Feedback type=\"invalid\">\n                  {addressError}\n                </Form.Control.Feedback>\n                <Form.Text className=\"text-muted\">\n                  –£–∫–∞–∂–∏—Ç–µ —É–ª–∏—Ü—É –∏ –Ω–æ–º–µ—Ä –¥–æ–º–∞. –ù–∞–ø—Ä–∏–º–µ—Ä: \"–ö–∏—Ä–æ–≤–∞ 15\" –∏–ª–∏ \"—É–ª. –õ–µ–Ω–∏–Ω–∞ 30\"\n                </Form.Text>\n              </div>\n            </Form.Group>\n\n            {newToilet.latitude && newToilet.longitude && (\n              <Alert variant=\"success\" className=\"small\">\n                ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã: {newToilet.latitude.toFixed(6)}, {newToilet.longitude.toFixed(6)}\n              </Alert>\n            )}\n\n            <Form.Group className=\"mb-3\">\n              <Form.Label>–¢–∏–ø *</Form.Label>\n              <Form.Select\n                required\n                value={newToilet.type}\n                onChange={(e) => setNewToilet(prev => ({ \n                  ...prev, \n                  type: e.target.value as Toilet['type'] \n                }))}\n              >\n                <option value=\"free\">üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π</option>\n                <option value=\"paid\">üí∞ –ü–ª–∞—Ç–Ω—ã–π</option>\n                <option value=\"purchase_required\">üõí –¢–æ–ª—å–∫–æ –∑–∞ –ø–æ–∫—É–ø–∫—É</option>\n              </Form.Select>\n            </Form.Group>\n\n            {(newToilet.type === 'paid' || newToilet.type === 'purchase_required') && (\n              <Form.Group className=\"mb-3\">\n                <Form.Label>–°—Ç–æ–∏–º–æ—Å—Ç—å / –£—Å–ª–æ–≤–∏—è</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  value={newToilet.price}\n                  onChange={(e) => setNewToilet(prev => ({ ...prev, price: e.target.value }))}\n                  placeholder=\"–ù–∞–ø—Ä–∏–º–µ—Ä: 50 —Ä—É–±–ª–µ–π / –ü–æ–∫—É–ø–∫–∞ –æ—Ç 100 —Ä—É–±–ª–µ–π\"\n                />\n              </Form.Group>\n            )}\n\n            <Form.Group className=\"mb-3\">\n              <Form.Label>–û–ø–∏—Å–∞–Ω–∏–µ</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                rows={3}\n                value={newToilet.description}\n                onChange={(e) => setNewToilet(prev => ({ ...prev, description: e.target.value }))}\n                placeholder=\"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—á–∞—Å—ã —Ä–∞–±–æ—Ç—ã, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ —Ç.–¥.)\"\n              />\n            </Form.Group>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={() => setShowAddModal(false)}>\n              –û—Ç–º–µ–Ω–∞\n            </Button>\n            <Button \n              variant=\"primary\" \n              type=\"submit\" \n              disabled={loading || geocodingLoading || !newToilet.latitude || !!addressError}\n            >\n              {loading ? '–û—Ç–ø—Ä–∞–≤–∫–∞...' : '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é'}\n            </Button>\n          </Modal.Footer>\n        </Form>\n      </Modal>\n    </div>\n  );\n};\n\nexport default MapPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}