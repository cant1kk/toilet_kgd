{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{MapPin,X,AlertTriangle}from'lucide-react';import{Button}from'./ui/button';import{telegramService}from'../services/telegram';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function GeolocationHandler(_ref){let{onLocationUpdate}=_ref;const[showPermissionPrompt,setShowPermissionPrompt]=useState(false);const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const[hasBeenShown,setHasBeenShown]=useState(false);const handleLocationUpdate=useCallback(position=>{const{latitude,longitude}=position.coords;onLocationUpdate(latitude,longitude);// Показываем уведомление в Telegram\nif(telegramService.isTelegramApp()){telegramService.notificationOccurred('success');}},[onLocationUpdate]);const handleLocationError=useCallback(error=>{console.warn('Geolocation error:',error);let message='Не удалось определить ваше местоположение';switch(error.code){case error.PERMISSION_DENIED:message='Доступ к геолокации запрещен. Пожалуйста, разрешите доступ в настройках.';break;case error.POSITION_UNAVAILABLE:message='Информация о местоположении недоступна.';break;case error.TIMEOUT:message='Время ожидания геолокации истекло.';break;}if(telegramService.isTelegramApp()){telegramService.showAlert(message);telegramService.notificationOccurred('error');}},[]);useEffect(()=>{// Проверяем поддержку геолокации\nif(!navigator.geolocation){setError('Ваш браузер не поддерживает геолокацию');setShowPermissionPrompt(true);return;}// Проверяем, есть ли уже сохраненное разрешение\nif('permissions'in navigator){navigator.permissions.query({name:'geolocation'}).then(result=>{if(result.state==='granted'){// Если разрешение уже дано, запрашиваем геолокацию без показа модального окна\nrequestLocation(false);}else if(result.state==='prompt'&&!hasBeenShown){// Показываем модальное окно только при первом запросе\nsetTimeout(()=>{setShowPermissionPrompt(true);setHasBeenShown(true);},1500);}}).catch(()=>{// Если API permissions не поддерживается, используем обычный подход\nif(!hasBeenShown){setTimeout(()=>{requestLocation(true);setHasBeenShown(true);},1500);}});}else{// Для старых браузеров\nif(!hasBeenShown){setTimeout(()=>{requestLocation(true);setHasBeenShown(true);},1500);}}},[hasBeenShown]);const requestLocation=function(){let showModalOnError=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(!navigator.geolocation){setError('Ваш браузер не поддерживает геолокацию');if(showModalOnError)setShowPermissionPrompt(true);return;}setIsLoading(true);setError('');// Увеличиваем таймауты для мобильных устройств\nconst options={enableHighAccuracy:true,timeout:25000,// 25 секунд для мобильных\nmaximumAge:300000// 5 минут кеширования\n};navigator.geolocation.getCurrentPosition(handleLocationUpdate,handleLocationError,options);};const getBrowserInstructions=()=>{const userAgent=navigator.userAgent.toLowerCase();if(userAgent.includes('chrome')&&(userAgent.includes('mobile')||userAgent.includes('android'))){return{title:'Chrome на мобильном',steps:['Нажмите на три точки ⋮ в правом верхнем углу','Выберите \"Настройки\" → \"Конфиденциальность и безопасность\"','Нажмите \"Настройки сайтов\" → \"Местоположение\"','Включите \"Доступ к местоположению\"','Обновите страницу и разрешите доступ']};}else if(userAgent.includes('chrome')){return{title:'Chrome на компьютере',steps:['Нажмите на иконку замка или \"i\" слева от адресной строки','В меню \"Разрешения\" найдите \"Местоположение\"','Выберите \"Разрешить\"','Обновите страницу']};}else if(userAgent.includes('firefox')){return{title:'Firefox',steps:['Нажмите на иконку замка слева от地址ной строки','В разделе \"Разрешения\" найдите \"Доступ к вашему местоположению\"','Измените на \"Разрешить\"','Обновите страницу']};}else if(userAgent.includes('safari')){return{title:'Safari',steps:['Нажмите на \"aA\" или иконку замка в адресной строке','Найдите \"Местоположение\"','Выберите \"Разрешить\"','Обновите страницу']};}else if(userAgent.includes('edg')){return{title:'Edge',steps:['Нажмите на иконку замка слева от адресной строки','В меню \"Разрешения\" найдите \"Местоположение\"','Выберите \"Разрешить\"','Обновите страницу']};}else{return{title:'Ваш браузер',steps:['Найдите настройки разрешений в адресной строке','Включите доступ к геолокации','Обновите страницу']};}};const getMobileSystemInstructions=()=>{const userAgent=navigator.userAgent.toLowerCase();if(userAgent.includes('android')){return{title:'Настройки Android',steps:['Откройте \"Настройки\" → \"Безопасность и конфидenциальность\"','Выберите \"Местоположение\" (или \"Доступ к местоположению\")','Включите \"Использовать местоположение\"','Найдите ваш браузер в списке приложений и разрешите доступ']};}else if(userAgent.includes('iphone')||userAgent.includes('ipad')||userAgent.includes('mac')){return{title:'Настройки iOS',steps:['Откройте \"Настройки\" → \"Конфиденциальность и безопасность\"','Выберите \"Службы геолокации\"','Включите \"Службы геолокации\"','Найдите ваш браузер в списке приложений и выберите \"При использовании\"']};}return null;};const instructions=getBrowserInstructions();const mobileInstructions=getMobileSystemInstructions();if(!showPermissionPrompt){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-blue-100 rounded-full\",children:/*#__PURE__*/_jsx(MapPin,{className:\"h-6 w-6 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"\\u0412\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u0435 \\u0433\\u0435\\u043E\\u043B\\u043E\\u043A\\u0430\\u0446\\u0438\\u044E\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"\\u0427\\u0442\\u043E\\u0431\\u044B \\u043C\\u044B \\u043C\\u043E\\u0433\\u043B\\u0438 \\u043F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u0432\\u0430\\u0448\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E\\u043F\\u043E\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435 \\u0438 \\u0431\\u043B\\u0438\\u0436\\u0430\\u0439\\u0448\\u0438\\u0435 \\u0442\\u0443\\u0430\\u043B\\u0435\\u0442\\u044B\"})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"icon\",onClick:()=>setShowPermissionPrompt(false),className:\"h-6 w-6\",children:/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-4 w-4 text-yellow-600 mt-0.5 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-yellow-800\",children:error})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>requestLocation(true),className:\"w-full\",size:\"lg\",disabled:isLoading,children:isLoading?'📍 Запрос геолокации...':'📍 Разрешить доступ к местоположению'}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-md p-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:[\"\\u041A\\u0430\\u043A \\u0432\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u0433\\u0435\\u043E\\u043B\\u043E\\u043A\\u0430\\u0446\\u0438\\u044E \\u0432 \",instructions.title,\":\"]}),/*#__PURE__*/_jsx(\"ol\",{className:\"text-sm text-gray-700 space-y-1\",children:instructions.steps.map((step,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-blue-600\",children:[index+1,\".\"]}),/*#__PURE__*/_jsx(\"span\",{children:step})]},index))})]}),mobileInstructions&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-orange-50 border border-orange-200 rounded-md p-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:[mobileInstructions.title,\":\"]}),/*#__PURE__*/_jsx(\"ol\",{className:\"text-sm text-gray-700 space-y-1\",children:mobileInstructions.steps.map((step,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-orange-600\",children:[index+1,\".\"]}),/*#__PURE__*/_jsx(\"span\",{children:step})]},index))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-md p-3\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCA1 \\u0421\\u043E\\u0432\\u0435\\u0442:\"}),\" \\u0414\\u043B\\u044F \\u043B\\u0443\\u0447\\u0448\\u0435\\u0439 \\u0442\\u043E\\u0447\\u043D\\u043E\\u0441\\u0442\\u0438 \\u0432\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u0435 GPS \\u0438 \\u0443\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u0441\\u044C, \\u0447\\u0442\\u043E \\u0443 \\u0432\\u0430\\u0441 \\u0435\\u0441\\u0442\\u044C \\u043F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0435\\u043D\\u0438\\u0435 \\u043A \\u0438\\u043D\\u0442\\u0435\\u0440\\u043D\\u0435\\u0442\\u0443.\"]})}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>setShowPermissionPrompt(false),className:\"w-full\",children:\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C \\u0431\\u0435\\u0437 \\u0433\\u0435\\u043E\\u043B\\u043E\\u043A\\u0430\\u0446\\u0438\\u0438\"})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","MapPin","X","AlertTriangle","Button","telegramService","jsx","_jsx","jsxs","_jsxs","GeolocationHandler","_ref","onLocationUpdate","showPermissionPrompt","setShowPermissionPrompt","error","setError","isLoading","setIsLoading","hasBeenShown","setHasBeenShown","handleLocationUpdate","position","latitude","longitude","coords","isTelegramApp","notificationOccurred","handleLocationError","console","warn","message","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","showAlert","navigator","geolocation","permissions","query","name","then","result","state","requestLocation","setTimeout","catch","showModalOnError","arguments","length","undefined","options","enableHighAccuracy","timeout","maximumAge","getCurrentPosition","getBrowserInstructions","userAgent","toLowerCase","includes","title","steps","getMobileSystemInstructions","instructions","mobileInstructions","className","children","variant","size","onClick","disabled","map","step","index"],"sources":["D:/map for cur/toilet-finder-kaliningrad/frontend/src/components/GeolocationHandler.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { MapPin, X, AlertTriangle } from 'lucide-react';\nimport { Button } from './ui/button';\nimport { telegramService } from '../services/telegram';\n\ninterface GeolocationHandlerProps {\n  onLocationUpdate: (lat: number, lon: number) => void;\n}\n\nexport function GeolocationHandler({ onLocationUpdate }: GeolocationHandlerProps) {\n  const [showPermissionPrompt, setShowPermissionPrompt] = useState(false);\n  const [error, setError] = useState<string>('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasBeenShown, setHasBeenShown] = useState(false);\n\n  const handleLocationUpdate = useCallback((position: GeolocationPosition) => {\n    const { latitude, longitude } = position.coords;\n    onLocationUpdate(latitude, longitude);\n    \n    // Показываем уведомление в Telegram\n    if (telegramService.isTelegramApp()) {\n      telegramService.notificationOccurred('success');\n    }\n  }, [onLocationUpdate]);\n\n  const handleLocationError = useCallback((error: GeolocationPositionError) => {\n    console.warn('Geolocation error:', error);\n    \n    let message = 'Не удалось определить ваше местоположение';\n    \n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n        message = 'Доступ к геолокации запрещен. Пожалуйста, разрешите доступ в настройках.';\n        break;\n      case error.POSITION_UNAVAILABLE:\n        message = 'Информация о местоположении недоступна.';\n        break;\n      case error.TIMEOUT:\n        message = 'Время ожидания геолокации истекло.';\n        break;\n    }\n    \n    if (telegramService.isTelegramApp()) {\n      telegramService.showAlert(message);\n      telegramService.notificationOccurred('error');\n    }\n  }, []);\n\n  useEffect(() => {\n    // Проверяем поддержку геолокации\n    if (!navigator.geolocation) {\n      setError('Ваш браузер не поддерживает геолокацию');\n      setShowPermissionPrompt(true);\n      return;\n    }\n\n    // Проверяем, есть ли уже сохраненное разрешение\n    if ('permissions' in navigator) {\n      navigator.permissions.query({ name: 'geolocation' }).then((result) => {\n        if (result.state === 'granted') {\n          // Если разрешение уже дано, запрашиваем геолокацию без показа модального окна\n          requestLocation(false);\n        } else if (result.state === 'prompt' && !hasBeenShown) {\n          // Показываем модальное окно только при первом запросе\n          setTimeout(() => {\n            setShowPermissionPrompt(true);\n            setHasBeenShown(true);\n          }, 1500);\n        }\n      }).catch(() => {\n        // Если API permissions не поддерживается, используем обычный подход\n        if (!hasBeenShown) {\n          setTimeout(() => {\n            requestLocation(true);\n            setHasBeenShown(true);\n          }, 1500);\n        }\n      });\n    } else {\n      // Для старых браузеров\n      if (!hasBeenShown) {\n        setTimeout(() => {\n          requestLocation(true);\n          setHasBeenShown(true);\n        }, 1500);\n      }\n    }\n  }, [hasBeenShown]);\n\n  const requestLocation = (showModalOnError: boolean = true) => {\n    if (!navigator.geolocation) {\n      setError('Ваш браузер не поддерживает геолокацию');\n      if (showModalOnError) setShowPermissionPrompt(true);\n      return;\n    }\n\n    setIsLoading(true);\n    setError('');\n\n    // Увеличиваем таймауты для мобильных устройств\n    const options = {\n      enableHighAccuracy: true,\n      timeout: 25000, // 25 секунд для мобильных\n      maximumAge: 300000 // 5 минут кеширования\n    };\n\n    navigator.geolocation.getCurrentPosition(\n      handleLocationUpdate,\n      handleLocationError,\n      options\n    );\n  };\n\n  const getBrowserInstructions = () => {\n    const userAgent = navigator.userAgent.toLowerCase();\n    \n    if (userAgent.includes('chrome') && (userAgent.includes('mobile') || userAgent.includes('android'))) {\n      return {\n        title: 'Chrome на мобильном',\n        steps: [\n          'Нажмите на три точки ⋮ в правом верхнем углу',\n          'Выберите \"Настройки\" → \"Конфиденциальность и безопасность\"',\n          'Нажмите \"Настройки сайтов\" → \"Местоположение\"',\n          'Включите \"Доступ к местоположению\"',\n          'Обновите страницу и разрешите доступ'\n        ]\n      };\n    } else if (userAgent.includes('chrome')) {\n      return {\n        title: 'Chrome на компьютере',\n        steps: [\n          'Нажмите на иконку замка или \"i\" слева от адресной строки',\n          'В меню \"Разрешения\" найдите \"Местоположение\"',\n          'Выберите \"Разрешить\"',\n          'Обновите страницу'\n        ]\n      };\n    } else if (userAgent.includes('firefox')) {\n      return {\n        title: 'Firefox',\n        steps: [\n          'Нажмите на иконку замка слева от地址ной строки',\n          'В разделе \"Разрешения\" найдите \"Доступ к вашему местоположению\"',\n          'Измените на \"Разрешить\"',\n          'Обновите страницу'\n        ]\n      };\n    } else if (userAgent.includes('safari')) {\n      return {\n        title: 'Safari',\n        steps: [\n          'Нажмите на \"aA\" или иконку замка в адресной строке',\n          'Найдите \"Местоположение\"',\n          'Выберите \"Разрешить\"',\n          'Обновите страницу'\n        ]\n      };\n    } else if (userAgent.includes('edg')) {\n      return {\n        title: 'Edge',\n        steps: [\n          'Нажмите на иконку замка слева от адресной строки',\n          'В меню \"Разрешения\" найдите \"Местоположение\"',\n          'Выберите \"Разрешить\"',\n          'Обновите страницу'\n        ]\n      };\n    } else {\n      return {\n        title: 'Ваш браузер',\n        steps: [\n          'Найдите настройки разрешений в адресной строке',\n          'Включите доступ к геолокации',\n          'Обновите страницу'\n        ]\n      };\n    }\n  };\n\n  const getMobileSystemInstructions = () => {\n    const userAgent = navigator.userAgent.toLowerCase();\n    \n    if (userAgent.includes('android')) {\n      return {\n        title: 'Настройки Android',\n        steps: [\n          'Откройте \"Настройки\" → \"Безопасность и конфидenциальность\"',\n          'Выберите \"Местоположение\" (или \"Доступ к местоположению\")',\n          'Включите \"Использовать местоположение\"',\n          'Найдите ваш браузер в списке приложений и разрешите доступ'\n        ]\n      };\n    } else if (userAgent.includes('iphone') || userAgent.includes('ipad') || userAgent.includes('mac')) {\n      return {\n        title: 'Настройки iOS',\n        steps: [\n          'Откройте \"Настройки\" → \"Конфиденциальность и безопасность\"',\n          'Выберите \"Службы геолокации\"',\n          'Включите \"Службы геолокации\"',\n          'Найдите ваш браузер в списке приложений и выберите \"При использовании\"'\n        ]\n      };\n    }\n    return null;\n  };\n\n  const instructions = getBrowserInstructions();\n  const mobileInstructions = getMobileSystemInstructions();\n\n  if (!showPermissionPrompt) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-start justify-between mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-blue-100 rounded-full\">\n              <MapPin className=\"h-6 w-6 text-blue-600\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900\">\n                Включите геолокацию\n              </h3>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                Чтобы мы могли показать ваше местоположение и ближайшие туалеты\n              </p>\n            </div>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setShowPermissionPrompt(false)}\n            className=\"h-6 w-6\"\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </div>\n\n        {error && (\n          <div className=\"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md\">\n            <div className=\"flex items-start gap-2\">\n              <AlertTriangle className=\"h-4 w-4 text-yellow-600 mt-0.5 flex-shrink-0\" />\n              <p className=\"text-sm text-yellow-800\">{error}</p>\n            </div>\n          </div>\n        )}\n\n        <div className=\"space-y-4\">\n          <Button\n            onClick={() => requestLocation(true)}\n            className=\"w-full\"\n            size=\"lg\"\n            disabled={isLoading}\n          >\n            {isLoading ? '📍 Запрос геолокации...' : '📍 Разрешить доступ к местоположению'}\n          </Button>\n\n          <div className=\"bg-gray-50 border border-gray-200 rounded-md p-4\">\n            <h4 className=\"font-medium text-gray-900 mb-2\">\n              Как включить геолокацию в {instructions.title}:\n            </h4>\n            <ol className=\"text-sm text-gray-700 space-y-1\">\n              {instructions.steps.map((step, index) => (\n                <li key={index} className=\"flex items-start gap-2\">\n                  <span className=\"font-medium text-blue-600\">{index + 1}.</span>\n                  <span>{step}</span>\n                </li>\n              ))}\n            </ol>\n          </div>\n\n          {mobileInstructions && (\n            <div className=\"bg-orange-50 border border-orange-200 rounded-md p-4\">\n              <h4 className=\"font-medium text-gray-900 mb-2\">\n                {mobileInstructions.title}:\n              </h4>\n              <ol className=\"text-sm text-gray-700 space-y-1\">\n                {mobileInstructions.steps.map((step, index) => (\n                  <li key={index} className=\"flex items-start gap-2\">\n                    <span className=\"font-medium text-orange-600\">{index + 1}.</span>\n                    <span>{step}</span>\n                  </li>\n                ))}\n              </ol>\n            </div>\n          )}\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-md p-3\">\n            <p className=\"text-sm text-blue-800\">\n              <strong>💡 Совет:</strong> Для лучшей точности включите GPS и убедитесь, что у вас есть подключение к интернету.\n            </p>\n          </div>\n\n          <Button\n            variant=\"outline\"\n            onClick={() => setShowPermissionPrompt(false)}\n            className=\"w-full\"\n          >\n            Продолжить без геолокации\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}