{"ast":null,"code":"import _objectSpread from\"d:/map for cur/toilet-finder-kaliningrad/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Modal,Form,Button,Alert,Spinner}from'react-bootstrap';import{geocodeAddress}from'../services/geocoding';import{telegramService}from'../services/telegram';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddToiletModal=_ref=>{let{show,onHide,onAdd,initialPosition,isTelegram}=_ref;const[formData,setFormData]=useState({name:'',address:'',latitude:(initialPosition===null||initialPosition===void 0?void 0:initialPosition.lat)||54.710,longitude:(initialPosition===null||initialPosition===void 0?void 0:initialPosition.lng)||20.510,type:'free',price:'',description:''});const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[addressLoading,setAddressLoading]=useState(false);// Обновление координат при изменении initialPosition\nuseEffect(()=>{if(initialPosition){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{latitude:initialPosition.lat,longitude:initialPosition.lng}));// Автоматически определяем адрес по кооратам\nhandleReverseGeocoding(initialPosition.lat,initialPosition.lng);}},[initialPosition]);// Обратное геокодирование - получение адреса по кооратам\nconst handleReverseGeocoding=async(lat,lng)=>{try{setAddressLoading(true);// Обратное геокодирование через Nominatim API\nconst response=await fetch(\"https://nominatim.openstreetmap.org/reverse?format=json&lat=\".concat(lat,\"&lon=\").concat(lng,\"&accept-language=ru\"));if(!response.ok){throw new Error('Reverse geocoding failed');}const data=await response.json();const address=data.display_name||'';if(address){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{address}));}}catch(err){console.warn('Failed to get address from coordinates:',err);}finally{setAddressLoading(false);}};// Геокодирование - получение коорат по адресу\nconst handleAddressChange=async address=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{address}));if(address.length>5){try{setLoading(true);const result=await geocodeAddress(address);if(result){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{latitude:parseFloat(result.lat),longitude:parseFloat(result.lon)}));}}catch(err){console.warn('Failed to geocode address:',err);}finally{setLoading(false);}}};// Обработка отправки формы\nconst handleSubmit=async e=>{e.preventDefault();setError(null);// Валидация\nif(!formData.name.trim()){setError('Название обязательно для заполнения');if(isTelegram){telegramService.impactOccurred('heavy');}return;}if(!formData.address.trim()){setError('Адрес обязателен для заполнения');if(isTelegram){telegramService.impactOccurred('heavy');}return;}// Для платных туалетов цена обязательна\nif(formData.type==='paid'&&!formData.price.trim()){setError('Для платных туалетов необходимо указать цену');if(isTelegram){telegramService.impactOccurred('heavy');}return;}try{setLoading(true);const toiletData={name:formData.name.trim(),address:formData.address.trim(),latitude:formData.latitude,longitude:formData.longitude,type:formData.type,price:formData.type==='paid'?formData.price.trim():undefined,description:formData.description.trim()||undefined};await onAdd(toiletData);// Сброс формы\nsetFormData({name:'',address:'',latitude:54.710,longitude:20.510,type:'free',price:'',description:''});if(isTelegram){telegramService.notificationOccurred('success');}}catch(err){console.error('Error submitting toilet:',err);setError('Не удалось добавить точку. Попробуйте позже.');if(isTelegram){telegramService.impactOccurred('heavy');}}finally{setLoading(false);}};// Обработка изменения полей формы\nconst handleChange=(field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));setError(null);};return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:onHide,centered:true,size:\"lg\",className:isTelegram?'telegram-modal':'',children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:isTelegram?'➕ Добавить точку':'Добавить новую точку'})}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",dismissible:true,onClose:()=>setError(null),children:error}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 *\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440: \\u0422\\u0426 \\u0415\\u0432\\u0440\\u043E\\u043F\\u0430\",value:formData.name,onChange:e=>handleChange('name',e.target.value),disabled:loading,required:true,autoFocus:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0410\\u0434\\u0440\\u0435\\u0441 *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440: \\u0443\\u043B. \\u041A\\u0438\\u0435\\u0432\\u0441\\u043A\\u0430\\u044F, 1, \\u041A\\u0430\\u043B\\u0438\\u043D\\u0438\\u043D\\u0433\\u0440\\u0430\\u0434\",value:formData.address,onChange:e=>handleAddressChange(e.target.value),disabled:loading||addressLoading,required:true}),addressLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute end-0 top-50 translate-middle-y me-2\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\"})})]}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"\\u041A\\u043E\\u043E\\u0440\\u0430\\u0442\\u044B \\u043E\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u044F\\u044E\\u0442\\u0441\\u044F \\u0430\\u0432\\u0442\\u043E\\u043C\\u0430\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0422\\u0438\\u043F *\"}),/*#__PURE__*/_jsxs(Form.Select,{value:formData.type,onChange:e=>handleChange('type',e.target.value),disabled:loading,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"free\",children:\"\\u0411\\u0435\\u0441\\u043F\\u043B\\u0430\\u0442\\u043D\\u044B\\u0439\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paid\",children:\"\\u041F\\u043B\\u0430\\u0442\\u043D\\u044B\\u0439\"}),/*#__PURE__*/_jsx(\"option\",{value:\"purchase_required\",children:\"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u0434\\u043B\\u044F \\u043F\\u043E\\u043A\\u0443\\u043F\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439\"})]})]}),formData.type==='paid'&&/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0426\\u0435\\u043D\\u0430 *\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440: 50 \\u0440\\u0443\\u0431\\u043B\\u0435\\u0439\",value:formData.price,onChange:e=>handleChange('price',e.target.value),disabled:loading,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 (\\u043D\\u0435\\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E)\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,placeholder:\"\\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F: \\u0447\\u0430\\u0441\\u044B \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B, \\u043E\\u0441\\u043E\\u0431\\u0435\\u043D\\u043D\\u043E\\u0441\\u0442\\u0438 \\u0438 \\u0442.\\u0434.\",value:formData.description,onChange:e=>handleChange('description',e.target.value),disabled:loading})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041A\\u043E\\u043E\\u0440\\u0434\\u0438\\u043D\\u0430\\u0442\\u044B\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",step:\"any\",placeholder:\"\\u0428\\u0438\\u0440\\u043E\\u0442\\u0430\",value:formData.latitude,onChange:e=>handleChange('latitude',e.target.value),disabled:loading})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",step:\"any\",placeholder:\"\\u0414\\u043E\\u043B\\u0433\\u043E\\u0442\\u0430\",value:formData.longitude,onChange:e=>handleChange('longitude',e.target.value),disabled:loading})})]}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"\\u041E\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u044F\\u044E\\u0442\\u0441\\u044F \\u0430\\u0432\\u0442\\u043E\\u043C\\u0430\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438 \\u043F\\u043E \\u0430\\u0434\\u0440\\u0435\\u0441\\u0443\"})]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:onHide,disabled:loading,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"primary\",disabled:loading,className:\"d-flex align-items-center gap-2\",children:[loading&&/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\"}),loading?'Добавление...':'Добавить точку']})]})]})]});};export default AddToiletModal;","map":{"version":3,"names":["React","useState","useEffect","Modal","Form","Button","Alert","Spinner","geocodeAddress","telegramService","jsx","_jsx","jsxs","_jsxs","AddToiletModal","_ref","show","onHide","onAdd","initialPosition","isTelegram","formData","setFormData","name","address","latitude","lat","longitude","lng","type","price","description","loading","setLoading","error","setError","addressLoading","setAddressLoading","prev","_objectSpread","handleReverseGeocoding","response","fetch","concat","ok","Error","data","json","display_name","err","console","warn","handleAddressChange","length","result","parseFloat","lon","handleSubmit","e","preventDefault","trim","impactOccurred","toiletData","undefined","notificationOccurred","handleChange","field","value","centered","size","className","children","Header","closeButton","Title","onSubmit","Body","variant","dismissible","onClose","Group","Label","Control","placeholder","onChange","target","disabled","required","autoFocus","animation","Text","Select","as","rows","step","Footer","onClick"],"sources":["d:/map for cur/toilet-finder-kaliningrad/frontend/src/components/AddToiletModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Modal, Form, Button, Alert, Spinner } from 'react-bootstrap';\r\nimport { geocodeAddress, validateAddress, formatAddress, GeocodingResult } from '../services/geocoding';\r\nimport { telegramService } from '../services/telegram';\r\nimport { Toilet } from '../types';\r\n\r\ninterface AddToiletModalProps {\r\n  show: boolean;\r\n  onHide: () => void;\r\n  onAdd: (toilet: Omit<Toilet, 'id' | 'approved' | 'created_at'>) => void;\r\n  initialPosition?: { lat: number; lng: number } | null;\r\n  isTelegram: boolean;\r\n}\r\n\r\nconst AddToiletModal: React.FC<AddToiletModalProps> = ({\r\n  show,\r\n  onHide,\r\n  onAdd,\r\n  initialPosition,\r\n  isTelegram,\r\n}) => {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    address: '',\r\n    latitude: initialPosition?.lat || 54.710,\r\n    longitude: initialPosition?.lng || 20.510,\r\n    type: 'free' as Toilet['type'],\r\n    price: '',\r\n    description: '',\r\n  });\r\n  \r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [addressLoading, setAddressLoading] = useState(false);\r\n\r\n  // Обновление координат при изменении initialPosition\r\n  useEffect(() => {\r\n    if (initialPosition) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        latitude: initialPosition.lat,\r\n        longitude: initialPosition.lng,\r\n      }));\r\n      \r\n      // Автоматически определяем адрес по кооратам\r\n      handleReverseGeocoding(initialPosition.lat, initialPosition.lng);\r\n    }\r\n  }, [initialPosition]);\r\n\r\n  // Обратное геокодирование - получение адреса по кооратам\r\n  const handleReverseGeocoding = async (lat: number, lng: number) => {\r\n    try {\r\n      setAddressLoading(true);\r\n      // Обратное геокодирование через Nominatim API\r\n      const response = await fetch(\r\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&accept-language=ru`\r\n      );\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Reverse geocoding failed');\r\n      }\r\n      \r\n      const data = await response.json();\r\n      const address = data.display_name || '';\r\n      if (address) {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          address,\r\n        }));\r\n      }\r\n    } catch (err) {\r\n      console.warn('Failed to get address from coordinates:', err);\r\n    } finally {\r\n      setAddressLoading(false);\r\n    }\r\n  };\r\n\r\n  // Геокодирование - получение коорат по адресу\r\n  const handleAddressChange = async (address: string) => {\r\n    setFormData(prev => ({ ...prev, address }));\r\n    \r\n    if (address.length > 5) {\r\n      try {\r\n        setLoading(true);\r\n        const result = await geocodeAddress(address);\r\n        if (result) {\r\n          setFormData(prev => ({\r\n            ...prev,\r\n            latitude: parseFloat(result.lat),\r\n            longitude: parseFloat(result.lon),\r\n          }));\r\n        }\r\n      } catch (err) {\r\n        console.warn('Failed to geocode address:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Обработка отправки формы\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    \r\n    // Валидация\r\n    if (!formData.name.trim()) {\r\n      setError('Название обязательно для заполнения');\r\n      if (isTelegram) {\r\n        telegramService.impactOccurred('heavy');\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (!formData.address.trim()) {\r\n      setError('Адрес обязателен для заполнения');\r\n      if (isTelegram) {\r\n        telegramService.impactOccurred('heavy');\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Для платных туалетов цена обязательна\r\n    if (formData.type === 'paid' && !formData.price.trim()) {\r\n      setError('Для платных туалетов необходимо указать цену');\r\n      if (isTelegram) {\r\n        telegramService.impactOccurred('heavy');\r\n      }\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const toiletData = {\r\n        name: formData.name.trim(),\r\n        address: formData.address.trim(),\r\n        latitude: formData.latitude,\r\n        longitude: formData.longitude,\r\n        type: formData.type,\r\n        price: formData.type === 'paid' ? formData.price.trim() : undefined,\r\n        description: formData.description.trim() || undefined,\r\n      };\r\n\r\n      await onAdd(toiletData);\r\n      \r\n      // Сброс формы\r\n      setFormData({\r\n        name: '',\r\n        address: '',\r\n        latitude: 54.710,\r\n        longitude: 20.510,\r\n        type: 'free',\r\n        price: '',\r\n        description: '',\r\n      });\r\n\r\n      if (isTelegram) {\r\n        telegramService.notificationOccurred('success');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error submitting toilet:', err);\r\n      setError('Не удалось добавить точку. Попробуйте позже.');\r\n      \r\n      if (isTelegram) {\r\n        telegramService.impactOccurred('heavy');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Обработка изменения полей формы\r\n  const handleChange = (field: string, value: string) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    setError(null);\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      show={show}\r\n      onHide={onHide}\r\n      centered\r\n      size=\"lg\"\r\n      className={isTelegram ? 'telegram-modal' : ''}\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>\r\n          {isTelegram ? '➕ Добавить точку' : 'Добавить новую точку'}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      \r\n      <Form onSubmit={handleSubmit}>\r\n        <Modal.Body>\r\n          {error && (\r\n            <Alert variant=\"danger\" dismissible onClose={() => setError(null)}>\r\n              {error}\r\n            </Alert>\r\n          )}\r\n\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Название *</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"Например: ТЦ Европа\"\r\n              value={formData.name}\r\n              onChange={(e) => handleChange('name', e.target.value)}\r\n              disabled={loading}\r\n              required\r\n              autoFocus\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Адрес *</Form.Label>\r\n            <div className=\"position-relative\">\r\n              <Form.Control\r\n                type=\"text\"\r\n                placeholder=\"Например: ул. Киевская, 1, Калининград\"\r\n                value={formData.address}\r\n                onChange={(e) => handleAddressChange(e.target.value)}\r\n                disabled={loading || addressLoading}\r\n                required\r\n              />\r\n              {addressLoading && (\r\n                <div className=\"position-absolute end-0 top-50 translate-middle-y me-2\">\r\n                  <Spinner animation=\"border\" size=\"sm\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n            <Form.Text className=\"text-muted\">\r\n              Коораты определяются автоматически\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Тип *</Form.Label>\r\n            <Form.Select\r\n              value={formData.type}\r\n              onChange={(e) => handleChange('type', e.target.value)}\r\n              disabled={loading}\r\n              required\r\n            >\r\n              <option value=\"free\">Бесплатный</option>\r\n              <option value=\"paid\">Платный</option>\r\n              <option value=\"purchase_required\">Только для покупателей</option>\r\n            </Form.Select>\r\n          </Form.Group>\r\n\r\n          {formData.type === 'paid' && (\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Цена *</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                placeholder=\"Например: 50 рублей\"\r\n                value={formData.price}\r\n                onChange={(e) => handleChange('price', e.target.value)}\r\n                disabled={loading}\r\n                required\r\n              />\r\n            </Form.Group>\r\n          )}\r\n\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Описание (необязательно)</Form.Label>\r\n            <Form.Control\r\n              as=\"textarea\"\r\n              rows={3}\r\n              placeholder=\"Дополнительная информация: часы работы, особенности и т.д.\"\r\n              value={formData.description}\r\n              onChange={(e) => handleChange('description', e.target.value)}\r\n              disabled={loading}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Координаты</Form.Label>\r\n            <div className=\"row\">\r\n              <div className=\"col-6\">\r\n                <Form.Control\r\n                  type=\"number\"\r\n                  step=\"any\"\r\n                  placeholder=\"Широта\"\r\n                  value={formData.latitude}\r\n                  onChange={(e) => handleChange('latitude', e.target.value)}\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n              <div className=\"col-6\">\r\n                <Form.Control\r\n                  type=\"number\"\r\n                  step=\"any\"\r\n                  placeholder=\"Долгота\"\r\n                  value={formData.longitude}\r\n                  onChange={(e) => handleChange('longitude', e.target.value)}\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n            </div>\r\n            <Form.Text className=\"text-muted\">\r\n              Определяются автоматически по адресу\r\n            </Form.Text>\r\n          </Form.Group>\r\n        </Modal.Body>\r\n\r\n        <Modal.Footer>\r\n          <Button \r\n            variant=\"secondary\"\r\n            onClick={onHide}\r\n            disabled={loading}\r\n          >\r\n            Отмена\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"primary\"\r\n            disabled={loading}\r\n            className=\"d-flex align-items-center gap-2\"\r\n          >\r\n            {loading && <Spinner animation=\"border\" size=\"sm\" />}\r\n            {loading ? 'Добавление...' : 'Добавить точку'}\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default AddToiletModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}